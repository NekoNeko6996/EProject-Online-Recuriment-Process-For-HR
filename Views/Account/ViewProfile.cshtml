@model Sem3EProjectOnlineCPFH.Models.Auth.ProfileSettingsViewModel

@{
    ViewBag.Title = "Profile View";
    Layout = "~/Views/Shared/_HomeLayoutPage.cshtml";
}

@if (Model == null)
{
    <div class="alert alert-danger text-center mt-5">
        <strong>Error:</strong> Profile data not found.
    </div>
}
else
{
    <div class="container mt-5">
        <div class="row">
            <!-- Profile Card -->
            <div class="col-md-4">
                <div class="card shadow-sm text-center p-3">
                    <img src="@Url.Content(Model.ProfileUpdate.AvatarUrl ?? "~/Content/Resources/DefaultImg.png")"
                         alt="Profile Avatar"
                         class="rounded-circle mx-auto"
                         style="width: 120px; height: 120px;">
                    <h4 class="mt-3">@Model.ProfileUpdate.FirstName @Model.ProfileUpdate.LastName</h4>
                    <p class="text-muted">@(ViewBag.RoleName.ToUpper())</p>
                    <textarea class="text-muted text-center border-0" style="resize: none; background-color: transparent" readonly disabled>alskd;ka</textarea>
                </div>

                @if (!string.IsNullOrEmpty(Model.ProfileUpdate.SocialAccount1) ||
                !string.IsNullOrEmpty(Model.ProfileUpdate.SocialAccount2) ||
                !string.IsNullOrEmpty(Model.ProfileUpdate.SocialAccount3))
                {
                    <div class="card shadow-sm mt-3">
                        <ul class="list-group list-group-flush">
                            @if (!string.IsNullOrEmpty(Model.ProfileUpdate.SocialAccount1))
                            {
                                <li class="list-group-item">
                                    Social Account: 
                                    <a href="@Model.ProfileUpdate.SocialAccount1" target="_blank">@Model.ProfileUpdate.SocialAccount1</a>
                                </li>
                            }
                            @if (!string.IsNullOrEmpty(Model.ProfileUpdate.SocialAccount2))
                            {
                                <li class="list-group-item">
                                    Social Account:
                                    <a href="@Model.ProfileUpdate.SocialAccount2" target="_blank">@Model.ProfileUpdate.SocialAccount2</a>
                                </li>
                            }
                            @if (!string.IsNullOrEmpty(Model.ProfileUpdate.SocialAccount3))
                            {
                                <li class="list-group-item">
                                    Social Account:
                                    <a href="@Model.ProfileUpdate.SocialAccount3" target="_blank">@Model.ProfileUpdate.SocialAccount3</a>
                                </li>
                            }
                        </ul>
                    </div>
                }

            </div>

            <!-- Profile Details -->
            <div class="col-md-8">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h5 class="fw-bold">Personal Information</h5>
                        <hr>
                        <div class="row">
                            <div class="col-md-6">
                                <p><strong>Full Name:</strong> @Model.ProfileUpdate.FirstName @Model.ProfileUpdate.LastName</p>
                                <p><strong>Email:</strong> @Model.ProfileUpdate.Email</p>
                                <p><strong>Phone:</strong> @Model.ProfileUpdate.PhoneNumber</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Project Status -->
                <div class="row mt-3">
                    <div class="col-md-12">
                        <div class="card shadow-sm p-3">
                            <h6><em>assignment</em> Interview Statistics</h6>

                            <p>Total Interviews: @ViewBag.TotalInterviews</p>

                            <p>Passed Interviews: @ViewBag.TotalPassed (@(ViewBag.TotalInterviews > 0 ? (ViewBag.TotalPassed * 100 / ViewBag.TotalInterviews) : 0)%)</p>
                            <div class="progress mb-2">
                                <div class="progress-bar bg-success" style="width: @(ViewBag.TotalInterviews > 0 ? (ViewBag.TotalPassed * 100 / ViewBag.TotalInterviews) : 0)%">
                                </div>
                            </div>

                            <p>Failed Interviews: @ViewBag.TotalFailed (@(ViewBag.TotalInterviews > 0 ? (ViewBag.TotalFailed * 100 / ViewBag.TotalInterviews) : 0)%)</p>
                            <div class="progress mb-2">
                                <div class="progress-bar bg-danger" style="width: @(ViewBag.TotalInterviews > 0 ? (ViewBag.TotalFailed * 100 / ViewBag.TotalInterviews) : 0)%">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
}
